<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hotel Booking Form</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.4.0/jspdf.umd.min.js"></script>
</head>

<body class="bg-gray-100">

    <!-- Main Container -->
    <div class="container mx-auto p-6">
        <div class="bg-white p-8 rounded-lg shadow-lg max-w-4xl mx-auto">
            <!-- Header -->
            <h1 class="text-3xl font-bold text-green-600 mb-6 text-center">Green Face Hotel Booking</h1>

            <!-- Booking Form -->
            <form id="booking-form">
                <!-- Full Name -->
                <div class="mb-4">
                    <label for="name" class="block text-lg font-semibold">Full Name</label>
                    <input type="text" id="name"
                        class="w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-green-500"
                        placeholder="Enter your full name" required>
                </div>

                <!-- Age -->
                <div class="mb-4">
                    <label for="age" class="block text-lg font-semibold">Age</label>
                    <input type="number" id="age"
                        class="w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-green-500"
                        placeholder="Enter your age" required>
                </div>

                <!-- Email -->
                <div class="mb-4">
                    <label for="email" class="block text-lg font-semibold">Email</label>
                    <input type="email" id="email"
                        class="w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-green-500"
                        placeholder="Enter your email" required>
                </div>

                <!-- Gender -->
                <div class="mb-4">
                    <label for="gender" class="block text-lg font-semibold">Gender</label>
                    <select id="gender"
                        class="w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-green-500">
                        <option value="Male">Male</option>
                        <option value="Female">Female</option>
                        <option value="Other">Other</option>
                    </select>
                </div>

                <!-- Phone Number -->
                <div class="mb-4">
                    <label for="phone" class="block text-lg font-semibold">Phone Number</label>
                    <input type="text" id="phone"
                        class="w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-green-500"
                        placeholder="Enter your phone number" required>
                </div>

                <!-- Check-in and Check-out Dates -->
                <div class="mb-4 grid grid-cols-2 gap-4">
                    <div>
                        <label for="check-in" class="block text-lg font-semibold">Check-in Date</label>
                        <input type="date" id="check-in"
                            class="w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-green-500"
                            required>
                    </div>
                    <div>
                        <label for="check-out" class="block text-lg font-semibold">Check-out Date</label>
                        <input type="date" id="check-out"
                            class="w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-green-500"
                            required>
                    </div>
                </div>

                <!-- People and Rooms -->
                <div class="mb-4 grid grid-cols-2 gap-4">
                    <div class="flex items-center justify-between">
                        <label for="people" class="text-lg font-semibold">People</label>
                        <div class="flex items-center">
                            <button type="button" id="decrement-people"
                                class="p-2 bg-green-500 text-white rounded-l-md">-</button>
                            <input type="number" id="people" value="1" class="w-16 text-center border p-3" readonly>
                            <button type="button" id="increment-people"
                                class="p-2 bg-green-500 text-white rounded-r-md">+</button>
                        </div>
                    </div>
                    <div class="flex items-center justify-between">
                        <label for="rooms" class="text-lg font-semibold">Rooms</label>
                        <div class="flex items-center">
                            <button type="button" id="decrement-rooms"
                                class="p-2 bg-green-500 text-white rounded-l-md">-</button>
                            <input type="number" id="rooms" value="1" class="w-16 text-center border p-3" readonly>
                            <button type="button" id="increment-rooms"
                                class="p-2 bg-green-500 text-white rounded-r-md">+</button>
                        </div>
                    </div>
                </div>

                <!-- ID Verification -->
                <div class="mb-4">
                    <label for="id-verification" class="block text-lg font-semibold">ID Verification</label>
                    <select id="id-verification"
                        class="w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-green-500">
                        <option value="Aadhar">Aadhar</option>
                        <option value="PAN">PAN</option>
                        <option value="Voter ID">Voter ID</option>
                        <option value="Passport">Passport</option>
                        <option value="Driving License">Driving License</option>
                    </select>
                </div>
                <div class="mb-4">
                    <label for="id-detail" class="block text-lg font-semibold">ID Details</label>
                    <input type="text" id="id-detail"
                        class="w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-green-500"
                        placeholder="Enter your ID details" required>
                </div>

                <!-- Billing Preview -->
                <div class="mb-4">
                    <label for="billing-preview" class="block text-lg font-semibold">Billing Preview</label>
                    <input type="text" id="billing-preview"
                        class="w-full p-3 border border-gray-300 rounded-md bg-gray-100" readonly>
                </div>

                <!-- Action Buttons -->
                <div class="flex justify-between mt-6">
                    <button type="button" id="book-now" class="bg-green-600 text-white p-3 rounded-md">Book Now</button>
                    <button type="button" id="save" class="bg-blue-500 text-white p-3 rounded-md">Save</button>
                    <button type="button" id="return" class="bg-red-500 text-white p-3 rounded-md"><a href="index.html">Return</a></button>
                </div>
            </form>
        </div>
    </div>
    <script>
        // Function to handle increment/decrement of people and rooms
        const decrementPeople = document.getElementById('decrement-people');
        const incrementPeople = document.getElementById('increment-people');
        const peopleInput = document.getElementById('people');
    
        const decrementRooms = document.getElementById('decrement-rooms');
        const incrementRooms = document.getElementById('increment-rooms');
        const roomsInput = document.getElementById('rooms');
    
        decrementPeople.addEventListener('click', () => {
            if (parseInt(peopleInput.value) > 1) peopleInput.value = parseInt(peopleInput.value) - 1;
        });
    
        incrementPeople.addEventListener('click', () => {
            peopleInput.value = parseInt(peopleInput.value) + 1;
        });
    
        decrementRooms.addEventListener('click', () => {
            if (parseInt(roomsInput.value) > 1) roomsInput.value = parseInt(roomsInput.value) - 1;
        });
    
        incrementRooms.addEventListener('click', () => {
            roomsInput.value = parseInt(roomsInput.value) + 1;
        });
    
        // Calculate and Display Billing Preview
        function calculateBilling() {
            const checkIn = new Date(document.getElementById('check-in').value);
            const checkOut = new Date(document.getElementById('check-out').value);
            const rooms = parseInt(roomsInput.value);
            const perDayRate = 1500;
    
            const timeDifference = checkOut - checkIn;
            const days = timeDifference / (1000 * 60 * 60 * 24);
    
            if (days > 0) {
                const roomCost = days * rooms * perDayRate;
                const billingPreview = `
                    ${days} day(s) = ${days * perDayRate}/-
                    ${rooms} Room(s) = ${roomCost}
                    *including breakfast
                `;
    
                document.getElementById('billing-preview').value = billingPreview; // Update the preview display
                return { totalCost: roomCost, billingPreview };
            } else {
                document.getElementById('billing-preview').value = "Invalid dates selected";
                return { totalCost: 0, billingPreview: "Invalid dates selected" };
            }
        }
    
        document.getElementById('check-in').addEventListener('change', calculateBilling);
        document.getElementById('check-out').addEventListener('change', calculateBilling);
        roomsInput.addEventListener('change', calculateBilling);
    
        // Book Now Button Event - PDF and Text Logging
        document.getElementById('book-now').addEventListener('click', () => {
            const name = document.getElementById('name').value;
            const age = document.getElementById('age').value;
            const email = document.getElementById('email').value;
            const gender = document.getElementById('gender').value;
            const phone = document.getElementById('phone').value;
            const idDetail = document.getElementById('id-detail').value;
            const { totalCost, billingPreview } = calculateBilling();
    
            const bookingDetails = `
                Name: ${name}
                Age: ${age}
                Email: ${email}
                Gender: ${gender}
                Phone: ${phone}
                ID Detail: ${idDetail}
                Billing Preview:
                ${billingPreview}
                Total Cost: ₹${totalCost}
            `;
    
            // Save to Text File (Owner's End)
            const blob = new Blob([bookingDetails], { type: 'text/plain' });
            const textLink = document.createElement('a');
            textLink.href = URL.createObjectURL(blob);
            textLink.download = `${name}_Booking_Details.txt`;
            textLink.click();
    
            // Generate PDF for User
            const pdfDoc = new jsPDF();
            pdfDoc.setFontSize(16);
            pdfDoc.text("Green Face Hotel Booking", 10, 10);
            pdfDoc.setFontSize(12);
            pdfDoc.text("Booking Details:", 10, 20);
    
            // Add booking details to the PDF
            pdfDoc.text(`Name: ${name}`, 10, 30);
            pdfDoc.text(`Age: ${age}`, 10, 40);
            pdfDoc.text(`Email: ${email}`, 10, 50);
            pdfDoc.text(`Gender: ${gender}`, 10, 60);
            pdfDoc.text(`Phone: ${phone}`, 10, 70);
            pdfDoc.text(`ID Verification: ${idDetail}`, 10, 80);
            
            // Add billing preview to the PDF
            pdfDoc.text("Billing Preview:", 10, 90);
            const billingLines = billingPreview.split("\n");
            let yPosition = 100;
            billingLines.forEach(line => {
                pdfDoc.text(line.trim(), 10, yPosition);
                yPosition += 10;
            });
    
            pdfDoc.text(`Total Cost: ₹${totalCost}`, 10, yPosition + 10);
    
            // Save the PDF with a filename based on the user's name
            pdfDoc.save(`${name}_Booking_Details.pdf`);
        });
    </script>
    

</body>

</html>